<div ng-controller="ReportsController as vm">
    <div class="page-title-box">
        <h4 class="page-title"><i class="fa fa-bar-chart"></i> Reports <span uib-tooltip="Total Records" ng-show="vm.totalCount">({{vm.totalCount | number}})</span></h4>
        <div class="clearfix"></div>
    </div>
    <div class="panel panel-border panel-info">
        <div class="panel-heading row">
            <h3 class="panel-title col-md-6">{{'general.filterBy' | translate}}</h3>

            <button type="button" class="mr mb-sm btn btn-primary pull-right" ng-click="vm.exportReportList()">
                <i class="fa fa-file-excel-o"></i> Export Report
            </button>
        </div>
        <div class="panel-body">
            <div class="col-md-4">
                <label>{{'event.event' | translate}}</label>
                <div class="col-sm-12">
                    <ui-select ng-model="vm.filterParams.eventId" ng-change="vm.claimedVouchersDt.dtInstance.rerender()" name="eventId" theme="bootstrap" class="text-left">
                        <ui-select-match placeholder="Select Event"><span ng-bind-html='$select.selected | localizeString'></span></ui-select-match>
                        <ui-select-choices repeat="event.id as event in  vm.events | filter: $select.search">
                            <span ng-bind-html="event | localizeString | highlight: $select.search"></span>
                        </ui-select-choices>
                    </ui-select>
                </div>
            </div>

            <div class="col-md-4" ng-if="vm.user.roleName == 1">
                <label>Restaurant</label>
                <div class="col-sm-12">
                    <ui-select ng-model="vm.filterParams.restaurantUserId" ng-change="vm.claimedVouchersDt.dtInstance.rerender()" name="restaurantUserId" theme="bootstrap" class="text-left">
                        <ui-select-match placeholder="Select Restaurant"><span ng-bind-html='$select.selected | localizeString'></span></ui-select-match>
                        <ui-select-choices repeat="restaurant.users[0].id as restaurant  in  vm.restaurants | filter: $select.search">
                            <span ng-bind-html="restaurant | localizeString | highlight: $select.search"></span>
                        </ui-select-choices>
                    </ui-select>
                </div>
            </div>

            <div class="col-md-4">
                <label><span>User Type</span></label>
                <div class="col-sm-12">
                    <ui-select ng-model="vm.filterParams.registrationTypeId" ng-change="vm.claimedVouchersDt.dtInstance.rerender()" name="registrationTypeId" theme="bootstrap" class="text-left">
                        <ui-select-match placeholder="Select User Type"><span ng-bind-html='$select.selected | localizeString'></span></ui-select-match>
                        <ui-select-choices repeat="registrationType.id as registrationType in  vm.registrationTypes | filter: $select.search">
                            <span ng-bind-html="registrationType | localizeString | highlight: $select.search"></span>
                        </ui-select-choices>
                    </ui-select>
                </div>
            </div>
        </div>
    </div>
    <div class="card-box">
        <table ng-if=" vm.params.filterParams.eventId && vm.params.filterParams.registrationTypeId && vm.params.filterParams.restaurantUserId" datatable="" class="table  table-striped table-colored-bordered table-bordered-info" dt-options="vm.claimedVouchersDt.dtOptions" dt-columns="vm.claimedVouchersDt.dtColumns" width="100%"
               dt-instance="vm.claimedVouchersDt.dtInstance" ng-required="!vm.claimedVouchers.length"></table>
    </div>
</div>  